{% extends "base.html" %}
{% block content %}
<header><h1>Book Library</h1></header>

<main>
    <table border="1" cellpadding="10">
        <tr>
            <th>Book Title</th>
            <th>Author</th>
            <th>Content</th>
            {% if session.get('role') == 'admin' %}
                <th>Action</th>
            {% endif %}
        </tr>

        {% for book in books %}
        <tr>
            <td>{{ book.book_name }}</td>
            <td>{{ book.author_name }}</td>
            <td>{{ book.content }}</td>
            {% if session.get('role') == 'admin' %}
            <td>
                <form action="{{ url_for('delete_book', book_id=book.id) }}" method="post" style="display:inline;">
                    <button type="submit" onclick="return confirm('Delete this book?')">Delete</button>
                </form>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

    {% if session.get('role') == 'admin' %}
        <br>
        <button onclick="location.href='{{ url_for('add_book') }}'">Add Book</button>
    {% endif %}

    <br><br>
    <button onclick="location.href='{{ url_for('index') }}'">Back</button>
</main>
{% endblock %}
