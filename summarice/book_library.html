{% extends "base.html" %}
{% block content %}
<section class="library-section">
    <div class="library-header">
        <h2>Book Library</h2>
        <form action="{{ url_for('books') }}" method="get" class="search-form">
            <input type="text" name="search" placeholder="Search by book title or author..." value="{{ search }}">
            <button type="submit">Search</button>
        </form>
    </div>

    {% if books %}
        <div class="book-grid">
            {% for book in books %}
                <div class="book-card">
                    <div class="book-cover">
                        <img src="{{ book.book_cover or url_for('static', filename='images/default_book.png') }}" alt="{{ book.book_name }}">
                    </div>
                    <div class="book-info">
                        <h3>{{ book.book_name }}</h3>
                        <p><strong>Author:</strong> {{ book.author_name }}</p>
                        <p><strong>Genre:</strong> {{ book.genre }}</p>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="pagination">
            {% if page > 1 %}
                <a href="{{ url_for('books', page=page-1, search=search) }}" class="page-btn">Previous</a>
            {% endif %}

            <span>Page {{ page }} of {{ total_pages }}</span>

            {% if page < total_pages %}
                <a href="{{ url_for('books', page=page+1, search=search) }}" class="page-btn">Next</a>
            {% endif %}
        </div>

    {% else %}
        <p class="no-books">No books found.</p>
    {% endif %}
</section>
{% endblock %}
