{% extends "base.html" %}

{% block content %}
<main class="library-container">
    <h2>Library</h2>

    <!-- Search Bar -->
    <form method="get" action="{{ url_for('books') }}" class="search-form">
        <input type="text" name="search" placeholder="Search a book..." value="{{ search }}">
        <button type="submit">Search</button>
    </form>

    <!-- Book Cards -->
    <div class="book-list">
        {% if books %}
            {% for book in books %}
                <div class="book-card">
                    <div class="book-title">{{ book.book_name }}</div>
                    <div class="book-author">by {{ book.author_name }}</div>
                    <div class="book-desc">{{ book.content }}</div>
                </div>
            {% endfor %}
        {% else %}
            <p>No books found.</p>
        {% endif %}
    </div>

    <!-- Pagination -->
    <div class="pagination">
        {% if page > 1 %}
            <a href="{{ url_for('books', page=page-1, search=search) }}">Previous</a>
        {% else %}
            <button class="disabled" disabled>Previous</button>
        {% endif %}

        {% if page < total_pages %}
            <a href="{{ url_for('books', page=page+1, search=search) }}">Next</a>
        {% else %}
            <button class="disabled" disabled>Next</button>
        {% endif %}
    </div>

    <div class="page-info">
        Page {{ page }} of {{ total_pages }}
    </div>
</main>
{% endblock %}
